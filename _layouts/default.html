{% include base_path %}
<!doctype html>
<html lang="{{ site.locale | slice: 0,2 }}" class="no-js"{% if site.site_theme == "dark" %} data-theme="dark"{% endif %}>
  <head>
    {% include head.html %}
    {% include head/custom.html %}
  </head>
  <body>
<canvas id="fluid-canvas" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: -1;"></canvas>
    {% include browser-upgrade.html %}
    {% include masthead.html %}
    {{ content }}
    <div class="page__footer">
      <footer>
        {% include footer/custom.html %}
        {% include footer.html %}
      </footer>
    </div>
    {% include scripts.html %}
<script>
// 简化版 WebGL 流体效果初始化
(function() {
  const canvas = document.getElementById('fluid-canvas');
  if (!canvas) {
    console.error('Canvas not found');
    return;
  }

  // 等待外部脚本加载
  function initFluid() {
    // 检查是否有 WebGL 支持
    const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
    if (!gl) {
      console.warn('WebGL not supported');
      return;
    }

    // 设置 canvas 尺寸
    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    // 尝试多次初始化配置
    let initAttempts = 0;
    const maxAttempts = 100;
    
    const tryInit = setInterval(function() {
      initAttempts++;
      
      if (typeof window.config !== 'undefined') {
        clearInterval(tryInit);
        
        // 隐藏 GUI
        const gui = document.querySelector('.dg');
        if (gui) gui.style.display = 'none';
        
        // 配置流体
        window.config.BACK_COLOR = { r: 245, g: 245, b: 250 };
        window.config.COLORFUL = true;
        window.config.SHADING = true;
        window.config.BLOOM = false;
        window.config.SUNRAYS = false;
        
        console.log('✅ Fluid simulation configured');
      } else if (initAttempts >= maxAttempts) {
        clearInterval(tryInit);
        console.warn('⚠️ Fluid config not available, using default settings');
      }
    }, 50);
  }

  // 页面加载完成后初始化
  if (document.readyState === 'complete') {
    initFluid();
  } else {
    window.addEventListener('load', initFluid);
  }
})();
</script>
  </body>
</html>
